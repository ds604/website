<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <style>
     body {
            color: #B1B1B1;
            background-color: #FFFFFF;
                                    /*font-family: Arial, sans-serif;*/
            font-size: 9pt;
            margin: 0;
            overflow: hidden;
    }
    footer { 
            width: 175px; 
            height: 1.5em; 
            position: fixed; 
            bottom: 0;
            right: 0;
            padding: 3px 5px 5px 5px;
            text-align: left;
            z-index: 200;
    }
    </style>
    </head>
    <body>

        <canvas id="myCanvas" width="500" height="500" style="border: 1px solid black;"></canvas>
        <footer><img src="http://davidsarma.org/images/DavidSarmaDotOrg_h12.png"></footer>

        <script>
            var canvas      = document.getElementById("myCanvas");
            var ctx         = canvas.getContext("2d");
            ctx.strokeStyle = "rgba(205,0,100,0.5)";
            ctx.lineWidth   = 5;

            //Make our in-memory canvas and set its size
            var inMemCanvas     = document.createElement("canvas");
            inMemCanvas.width   = canvas.width;
            inMemCanvas.height  = canvas.height;
            var inMemCtx        = inMemCanvas.getContext("2d");

            var path = null;
            var down = false;

            //Fixes a problem where clicking in some browsers causes text selection on the page
            canvas.addEventListener("selectstart",
                function(e){ e.preventDefault(); return false; }, false);

            canvas.addEventListener("mousedown", function(e){
                //grossly simplified mouse coordinates
                var x   = e.clientX;
                var y   = e.clientY;
                path    = [];
                path.push([x,y]);
                down    = true;
            }, true);

            canvas.addEventListener("mousemove", function(e){
                if (!down) return;
                //grossly simplified mouse coordinates
                var x   = e.clientX;
                var y   = e.clientY;
                //add a new point to path, clear canvas, and draw complete path
                path.push([x,y]);
                drawPath();
            }, true);
                
            canvas.addEventListener("mouseup", function(e){
                drawPath();
                down    = false;
                //save canvas to our in-memory canvas
                inMemCtx.clearRect(0,0,500,500);
                inMemCtx.drawImage(canvas,0,0);
            }, true);

            function drawPath(){
                ctx.clearRect(0,0,500,500);
                //put what was previously there back:
                ctx.drawImage(inMemCanvas,0,0);
                ctx.beginPath();
                var l = path.length;
                for (var i = 0; i < l; i++){
                    var p = path[i];
                    if (i === 0) ctx.moveTo(p[0], p[l]);
                    else ctx.lineTo(p[0],p[l]);
                }
                ctx.stroke();
            }

      </script>
            
                    
    </body>
</html>
